(
  (Imports Prelude)
  (Types
    (Any Prelude Any)
    (String Prelude String)

    (strcat Prelude strcat)
    (print Prelude print)
    (read Prelude read)
  )
  (Structs
    (SELF
      (MAIN MAIN)
      (str1 String)
      (str2 String)
      (name String)
      (prompt String)
    )
    (func$args (name String))
    (func$regs
      (SELF SELF)
      (ARGS func$args)

      (a String)
      (b String)

      (strcat strcat)
      (print print)
    )
    (MAIN$args)
    (MAIN$regs
      (SELF SELF)
      (ARGS MAIN$args)

      (nm String)
      (msg String)

      (func func)
      (print print)
      (read read)
    )
  )
  (Functions
    (func
      func$args
      func$regs
      (Code
        (get a SELF str1)
        (get b ARGS name)
        (new strcat)
        (set strcat a a)
        (set strcat b b)
        (call strcat)
        (get a strcat r)
        (get b SELF str2)
        (new strcat)
        (set strcat a a)
        (set strcat b b)
        (call strcat)
        (get a strcat r)
        (new print)
        (set print a a)
        (call print)
        (end)
      )
    )
    (MAIN
      MAIN$args
      MAIN$regs
      (Code
        ;(get nm SELF name)

        (get msg SELF prompt)
        (new print)
        (set print a msg)
        (call print)
        (new read)
        (call read)
        (get nm read r)

        (new func)
        (set func name nm)
        (call func)
        (end)
      )
    )
  )
  (Constants
    (str1 str "Hola ")
    (str2 str "!")
    (prompt str "¿Cómo te llamas?: ")
    (name str "Arnaud")
  )
)